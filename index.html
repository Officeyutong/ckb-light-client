<html>

<head>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.4/dist/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/semantic-ui@2.5.0/dist/semantic.min.css">
    <script src="https://cdn.jsdelivr.net/npm/semantic-ui@2.5.0/dist/semantic.min.js"></script>
    <script type="module">
        import LightClient from "./light-client-js/dist/index.js";

        const devConfig = await (await fetch("./dev-config.toml")).text();
        const devSpec = await (await fetch("./dev-spec.toml")).text();

        console.log(LightClient);
        window.initWorkers = async () => {
            $("#init-button").addClass("loading");
            const client = new LightClient();
            window.client = client;
            await client.start(
                {
                    type: "DevNet",
                    config: devConfig,
                    spec: devSpec
                }
            );

            $("#init-button").removeClass("loading");
        };
    </script>

</head>

<body>
    <div style="margin-top: 10%;margin-left: 10%;margin-right: 10%;">
        <button class="ui button" id="init-button" onclick="initWorkers()">Initialize workers</button>
        <div class="ui divider"></div>

    </div>
</body>

</html>
