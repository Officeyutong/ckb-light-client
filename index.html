<html>

<head>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.4/dist/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/semantic-ui@2.5.0/dist/semantic.min.css">
    <script src="https://cdn.jsdelivr.net/npm/semantic-ui@2.5.0/dist/semantic.min.js"></script>
    <script type="module">
        import LightClient from "./light-client-js/dist/index.js";

      

        console.log(LightClient);
        window.initWorkers = async (spec = "./test/config.toml") => {
            const config = await (await fetch(spec)).text();
            $("#init-button").addClass("loading");
            const client = new LightClient();
            window.client = client;
            await client.start(
                {
                    type: "TestNet",
                    config,
                },
                "info"
            );

            $("#init-button").removeClass("loading");
            return client;
        };
        window.doTest = async () => {
            await window.client.setScripts([{ script: { codeHash: "0x9bd7e06f3ecf4be0f2fcd2188b23f1b9fcc88e5d4b65a8637b17723bbda3cce8", hashType: "type", args: "0xef0273afa67242b1b407eced450f78b2c02a2a23", }, scriptType: "lock", blockNumber: "0xb8d328" }], 0)
            console.log(await window.client.getCellsCapacity({ script: { codeHash: "0x9bd7e06f3ecf4be0f2fcd2188b23f1b9fcc88e5d4b65a8637b17723bbda3cce8", hashType: "type", args: "0xef0273afa67242b1b407eced450f78b2c02a2a23" }, scriptType: "lock" }))
            console.log(await window.client.getCells({ script: { codeHash: "0x9bd7e06f3ecf4be0f2fcd2188b23f1b9fcc88e5d4b65a8637b17723bbda3cce8", hashType: "type", args: "0xef0273afa67242b1b407eced450f78b2c02a2a23" }, scriptType: "lock" }))
            console.log(await window.client.getTransactions({ script: { codeHash: "0x9bd7e06f3ecf4be0f2fcd2188b23f1b9fcc88e5d4b65a8637b17723bbda3cce8", hashType: "type", args: "0xef0273afa67242b1b407eced450f78b2c02a2a23" }, scriptType: "lock" }))
        };
        window.doTest2 = async () => {
            const cells = await window.client.getCells({
                script: {
                    codeHash: "0x9bd7e06f3ecf4be0f2fcd2188b23f1b9fcc88e5d4b65a8637b17723bbda3cce8",
                    hashType: "type",
                    args: "0xef0273afa67242b1b407eced450f78b2c02a2a23"
                }, scriptType: "lock"
            }, "asc", 1);
            return await window.client.getCells({
                script: {
                    codeHash: "0x9bd7e06f3ecf4be0f2fcd2188b23f1b9fcc88e5d4b65a8637b17723bbda3cce8",
                    hashType: "type",
                    args: "0xef0273afa67242b1b407eced450f78b2c02a2a23"
                }, scriptType: "lock"
            }, "asc", 1, cells.lastCursor);
        }
    </script>

</head>

<body>
    <div style="margin-top: 10%;margin-left: 10%;margin-right: 10%;">
        <button class="ui button" id="init-button" onclick="initWorkers()">Initialize workers</button>
        <div class="ui divider"></div>

    </div>
</body>

</html>
